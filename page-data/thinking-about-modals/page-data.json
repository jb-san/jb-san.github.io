{"componentChunkName":"component---node-modules-gatsby-theme-blog-src-templates-post-js","path":"/thinking-about-modals","webpackCompilationHash":"1ea1feeb93b896de5d6d","result":{"data":{"post":{"id":"aba208f0-8310-5303-a00c-b3f8a2abf4c3","title":"Thinking about modals","date":"December 04, 2019","excerpt":"Modals are apart of any modern website/app, hate them or love them, they do have valid use cases, even if they are often used for annoying…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Thinking about modals\",\n  \"date\": \"2019-12-04T00:00:00.000Z\",\n  \"tags\": [\"react\", \"modals\", \"a11y\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Modals are apart of any modern website/app, hate them or love them, they do have valid use cases, even if they are often used for annoying \\u201Cwe are using your data in this way.. approve plz\\u201D kind of ways.\"), mdx(\"p\", null, \"Most of the time you just want to darken the page and show a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Box\"), \" with some information in it. I have always reached for react-modal, since I could not be bothered\\nto figure out all of the tricky things like trapping the focus inside of the box, return the focus to the previously focused element when it closes etc..\\nAnd it worked great, it has a good clean API and is easy to use.\"), mdx(\"p\", null, \"But then came the day that i wanted to animate in the Box and the Overlay separately, I reached for my favorite react animation library, react-spring,\\nOnly to find out that there is no clear way to with react-modal.\"), mdx(\"p\", null, \"react-modal supports css animations which are based on css transitions, i find that physics based animations feels more natural than key-framed ones.\\nand you can pass in specific classNames or styles to the overlay, but what if I don\\u2019t want an Overlay ? what if the modal is a wacky svg element with some stuff inside of it and you want to animate it and trap the focus inside of it ?\\nwell i wanted to do just that, I wanted to do the classic \\u201CNickolodeon\\u201D splat like a modal.\"), mdx(\"p\", null, \"So i decided to try to make a modal that would animate using react-spring but still handle the a11y and focus stuff.\"), mdx(\"p\", null, \"Ok, so first things first lets checkout \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.w3.org/TR/wai-aria-practices/#dialog_modal\"\n  }), \"wai-aria-practices\"), \" for some basics.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Keyboard Interaction\"), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"In the following description, the term \\u201Ctabbable element\\u201D refers to any element with a tabindex value of zero or greater. Note that values greater than 0 are strongly discouraged.\"), mdx(\"pre\", {\n    parentName: \"blockquote\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"When a dialog opens, focus moves to an element inside the dialog. See notes below regarding initial focus placement.\\nTab:\\n    Moves focus to the next tabbable element inside the dialog.\\n    If focus is on the last tabbable element inside the dialog, moves focus to the first tabbable element inside the dialog.\\nShift + Tab:\\n    Moves focus to the previous tabbable element inside the dialog.\\n    If focus is on the first tabbable element inside the dialog, moves focus to the last tabbable element inside the dialog.\\nEscape: Closes the dialog.\\n\"))), mdx(\"p\", null, \"so when a modal is open, we should trap it inside of the modal element. lets write a hook that does exactly that, lets call it \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useTrapFocus\"), \".\"), mdx(\"p\", null, \"since this is supposed to trap focus inside of an element we need to get back a ref that we can place on our element\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"function Modal() {\\n  const modalRef = useTrapFocus()\\n  return (\\n    <div aria-modal={true} role={\\\"dialog\\\"} ref={modalRef}>\\n      content of modal\\n    </div>\\n  )\\n}\\n\")), mdx(\"p\", null, \"this imaginary \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useTrapfocus\"), \" hook would take care of trapping the focus, and returning focus to the element that caused the element to be rendered.\"), mdx(\"p\", null, \"Another common thing is to lock the body so that it doesn\\u2019t scroll, so lets create a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useBodyScrollLock\"), \" hook\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"function Modal() {\\n  useBodyScrollLock()\\n  const modalRef = useTrapFocus()\\n\\n  return (\\n    <div aria-modal={true} role={\\\"dialog\\\"} ref={modalRef}>\\n      content of modal\\n    </div>\\n  )\\n}\\n\")), mdx(\"p\", null, \"now my modal component can be anything I want it to be, like a svg or anything, and my overlay is simply another component that my modal component renders in\\nand i can use any animation library I want to animate it.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"function Modal() {\\n  useBodyScrollLock()\\n  const modalRef = useTrapFocus()\\n  return (\\n    <Overlay>\\n      <svg aria-modal={true} role={\\\"dialog\\\"} ref={modalRef}>\\n        content of modal\\n      </svg>\\n    </Overlay>\\n  )\\n}\\n\")), mdx(\"p\", null, \"I created the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/@weahead/react-customizable-modal\"\n  }), \"react-customizable-modal\"), \"\\nwhere I have the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useTrapFocus\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useBodyScrollLock\"), \" and some other helper hooks like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useCloseOnEsc\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ModalPortal\"), \" component to help with creating a portal for the modal.\"));\n}\n;\nMDXContent.isMDXComponent = true;"},"site":{"siteMetadata":{"title":"X3M"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"aba208f0-8310-5303-a00c-b3f8a2abf4c3","excerpt":"Modals are apart of any modern website/app, hate them or love them, they do have valid use cases, even if they are often used for annoying…","slug":"/thinking-about-modals","title":"Thinking about modals","date":"December 04, 2019","siteTitle":"X3M","socialLinks":[{"name":"github","url":"https://github.com/jb-san"},{"name":"linkedin","url":"https://www.linkedin.com/in/jonathan-borg-8a520b97/"}],"previous":{"node":{"id":"710083a9-7ae6-5fd0-812f-2cf5dd12c7ff","excerpt":"I have a tendency to indulge in nostalgia perhaps a bit more than some would consider normal.\nBut i figured I could improve my web…","slug":"/reactstorm","title":"Reactstorm","date":"November 30, 2019"}},"next":{"node":{"id":"49069d0b-5944-5af8-ba1e-603f2b76cd07","excerpt":"Refactorability is.. not a word, but it should be, it should be defined as To which degree or factor a piece of code or application is able…","slug":"/thinking-about-proxy-components","title":"Thinking about proxy components","date":"December 17, 2019"}}}}}